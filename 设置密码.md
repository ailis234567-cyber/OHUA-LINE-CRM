# 🔒 设置访问密码

## 为什么需要密码？

使用 ngrok 时，网址是公开的，任何人都可能访问。添加密码保护可以：
- ✅ 防止未授权访问
- ✅ 保护你的截图数据
- ✅ 即使网址泄露也需要密码

---

## 🚀 快速设置

### 方法 1: 使用环境变量（推荐）

启动 Web 应用时设置密码：

```bash
# Mac/Linux
export WEB_PASSWORD=你的密码
python web_app.py

# 或者一行命令
WEB_PASSWORD=你的密码 python web_app.py
```

### 方法 2: 修改代码（不推荐）

直接修改 `web_app.py` 中的密码（安全性较低）：

```python
ACCESS_PASSWORD = '你的密码'  # 不推荐，密码会暴露在代码中
```

---

## 📝 完整启动步骤（带密码）

### 1. 启动 Web 应用（带密码）

**终端 1**：
```bash
cd /Users/huihui/live-monitor
source venv/bin/activate
WEB_PASSWORD=你的密码 python web_app.py
```

### 2. 启动 ngrok

**终端 2**：
```bash
ngrok http 5001
```

### 3. 访问网站

1. 打开 ngrok 提供的网址
2. 会看到登录页面
3. 输入密码即可访问

---

## 🔐 设置强密码

### 密码要求：
- ✅ 至少 8 位字符
- ✅ 包含字母和数字
- ✅ 不要使用常见密码（如：123456、password）

### 示例：
```bash
# 好密码
WEB_PASSWORD=MySecure2024!Pass

# 弱密码（不推荐）
WEB_PASSWORD=123456
```

---

## 🛡️ 安全建议

### 1. **使用环境变量**
- ✅ 密码不会保存在代码中
- ✅ 不会提交到 Git 仓库
- ✅ 更安全

### 2. **定期更换密码**
- 建议每月更换一次
- 如果怀疑泄露，立即更换

### 3. **不要分享密码**
- 只告诉需要访问的人
- 使用安全的方式分享（不要发邮件、微信等）

### 4. **使用不同密码**
- 不要使用其他网站的密码
- 为这个系统设置专用密码

---

## 🔄 修改密码

### 方法 1: 重启时修改
```bash
# 停止当前服务（Ctrl+C）
# 使用新密码重启
WEB_PASSWORD=新密码 python web_app.py
```

### 方法 2: 使用配置文件（高级）

创建 `.env` 文件：
```bash
WEB_PASSWORD=你的密码
SECRET_KEY=随机字符串
```

然后安装 python-dotenv：
```bash
pip install python-dotenv
```

在 `web_app.py` 开头添加：
```python
from dotenv import load_dotenv
load_dotenv()
```

---

## ❓ 常见问题

### Q: 忘记密码怎么办？
A: 停止服务，重新设置密码启动。

### Q: 可以不设置密码吗？
A: 可以，不设置 `WEB_PASSWORD` 环境变量即可。但不推荐，特别是使用 ngrok 时。

### Q: 密码会保存在哪里？
A: 如果使用环境变量，密码只存在于当前终端会话中，不会保存到文件。

### Q: 如何让多个用户使用不同密码？
A: 当前版本只支持单一密码。如需多用户，需要更复杂的认证系统。

---

## ✅ 安全检查清单

- [ ] 设置了强密码（至少8位，包含字母和数字）
- [ ] 使用环境变量设置密码（不是硬编码）
- [ ] 密码只分享给信任的人
- [ ] 定期更换密码
- [ ] 监控访问日志，发现异常及时更换密码

---

## 🎯 推荐配置

```bash
# 设置强密码
export WEB_PASSWORD="SecurePass2024!"

# 设置随机密钥（用于 session）
export SECRET_KEY=$(openssl rand -hex 32)

# 启动服务
python web_app.py
```

这样配置后，即使网址泄露，也需要密码才能访问，大大提高了安全性！

