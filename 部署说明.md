# ğŸ“¦ Linux VPS éƒ¨ç½²åŒ…å·²ç”Ÿæˆ

## âœ… æ‰“åŒ…å®Œæˆ

æ‰“åŒ…æ–‡ä»¶ï¼š`live-monitor-vps.tar.gz`

ä½ç½®ï¼š`/Users/huihui/live-monitor/live-monitor-vps.tar.gz`

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### 1. ä¸Šä¼ åˆ° VPS

```bash
scp live-monitor-vps.tar.gz root@ä½ çš„VPS_IP:/opt/
```

### 2. SSH è¿æ¥åˆ° VPS

```bash
ssh root@ä½ çš„VPS_IP
```

### 3. è§£å‹å¹¶å®‰è£…

```bash
cd /opt
tar -xzf live-monitor-vps.tar.gz
cd live-monitor-vps
bash install.sh
```

### 4. é…ç½®ç›‘æ§åŒºåŸŸ

```bash
cd /opt/live-monitor
source venv/bin/activate

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆæ ¹æ®å®é™…æƒ…å†µè®¾ç½®åæ ‡ï¼‰
nano config.yaml
```

**é‡è¦é…ç½®**ï¼š
- è®¾ç½® `retina: false`ï¼ˆLinux ä¸éœ€è¦ï¼‰
- è®¾ç½®æ­£ç¡®çš„ç›‘æ§åŒºåŸŸåæ ‡

### 5. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨ç›‘æ§æœåŠ¡
systemctl start live-monitor
systemctl enable live-monitor

# å¯åŠ¨ Web æœåŠ¡
systemctl start live-monitor-web
systemctl enable live-monitor-web
```

### 6. å¼€æ”¾é˜²ç«å¢™ç«¯å£

```bash
# Ubuntu/Debian
ufw allow 5001/tcp

# CentOS/RHEL
firewall-cmd --permanent --add-port=5001/tcp
firewall-cmd --reload
```

### 7. è®¿é—® Web ç•Œé¢

æ‰“å¼€æµè§ˆå™¨ï¼š`http://ä½ çš„VPS_IP:5001`

---

## ğŸ“‹ æ‰“åŒ…å†…å®¹

- âœ… `app.py` - ä¸»ç¨‹åº
- âœ… `web_app.py` - Web æœåŠ¡
- âœ… `config.yaml` - é…ç½®æ–‡ä»¶
- âœ… `requirements.txt` - Python ä¾èµ–
- âœ… `templates/` - Web æ¨¡æ¿
- âœ… `static/` - é™æ€æ–‡ä»¶
- âœ… `install.sh` - å®‰è£…è„šæœ¬
- âœ… `DEPLOY.md` - éƒ¨ç½²æ–‡æ¡£

---

## âš ï¸ Linux ç‰¹æ®Šæ³¨æ„äº‹é¡¹

### 1. æˆªå›¾åŠŸèƒ½

Linux éœ€è¦å›¾å½¢ç¯å¢ƒæ‰èƒ½æˆªå›¾ã€‚å¦‚æœ VPS æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼š

**é€‰é¡¹ Aï¼šä½¿ç”¨è™šæ‹Ÿæ˜¾ç¤ºï¼ˆæ¨èï¼‰**
```bash
apt-get install xvfb
Xvfb :99 -screen 0 1024x768x24 &
export DISPLAY=:99
```

**é€‰é¡¹ Bï¼šä½¿ç”¨è¿œç¨‹æ¡Œé¢**
- å®‰è£… VNC æˆ– XRDP
- è¿æ¥åˆ°è¿œç¨‹æ¡Œé¢åè¿è¡Œç¨‹åº

### 2. Retina æ¨¡å¼

Linux ä¸éœ€è¦ Retina æ¨¡å¼ï¼Œç¡®ä¿ `config.yaml` ä¸­ï¼š
```yaml
storage:
  retina: false
```

### 3. ä¾èµ–å®‰è£…

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…ï¼š
- Python 3
- pip
- ç³»ç»Ÿä¾èµ–ï¼ˆOpenGLã€GLib ç­‰ï¼‰

---

## ğŸ”§ æœåŠ¡ç®¡ç†

### æŸ¥çœ‹çŠ¶æ€
```bash
systemctl status live-monitor
systemctl status live-monitor-web
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æ—¥å¿—
journalctl -u live-monitor -f
journalctl -u live-monitor-web -f

# æœ€è¿‘ 100 è¡Œ
journalctl -u live-monitor -n 100
```

### é‡å¯æœåŠ¡
```bash
systemctl restart live-monitor
systemctl restart live-monitor-web
```

---

## ğŸŒ ä½¿ç”¨ Nginx åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨åŸŸåè®¿é—®ï¼Œå¯ä»¥é…ç½® Nginxï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:5001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

ç„¶åæ·»åŠ  HTTPSï¼š
```bash
certbot --nginx -d your-domain.com
```

---

## ğŸ“ æ–‡ä»¶ä½ç½®

- åº”ç”¨ç›®å½•ï¼š`/opt/live-monitor/`
- é…ç½®æ–‡ä»¶ï¼š`/opt/live-monitor/config.yaml`
- æˆªå›¾ç›®å½•ï¼š`/opt/live-monitor/screenshots/`
- æ—¥å¿—ç›®å½•ï¼š`/opt/live-monitor/logs/`
- æœåŠ¡æ–‡ä»¶ï¼š`/etc/systemd/system/live-monitor.service`
- Web æœåŠ¡ï¼š`/etc/systemd/system/live-monitor-web.service`

---

## ğŸ†˜ æ•…éšœæ’é™¤

### æ— æ³•æˆªå›¾
- æ£€æŸ¥æ˜¯å¦æœ‰å›¾å½¢ç¯å¢ƒ
- å®‰è£… xvfbï¼š`apt-get install xvfb`
- è®¾ç½® DISPLAY ç¯å¢ƒå˜é‡

### Web æœåŠ¡æ— æ³•è®¿é—®
- æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š`systemctl status live-monitor-web`
- æ£€æŸ¥ç«¯å£ï¼š`netstat -tlnp | grep 5001`
- æ£€æŸ¥é˜²ç«å¢™
- æŸ¥çœ‹æ—¥å¿—ï¼š`journalctl -u live-monitor-web -f`

### OCR è¯†åˆ«å¤±è´¥
- æ£€æŸ¥ PaddleOCR å®‰è£…
- æŸ¥çœ‹æ—¥å¿—äº†è§£å…·ä½“é”™è¯¯
- ç¡®ä¿æœ‰è¶³å¤Ÿç£ç›˜ç©ºé—´

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] æ–‡ä»¶å·²ä¸Šä¼ åˆ° VPS
- [ ] å®‰è£…è„šæœ¬å·²è¿è¡Œ
- [ ] é…ç½®æ–‡ä»¶å·²è®¾ç½®ï¼ˆretina: falseï¼‰
- [ ] ç›‘æ§åŒºåŸŸåæ ‡å·²é…ç½®
- [ ] æœåŠ¡å·²å¯åŠ¨
- [ ] é˜²ç«å¢™ç«¯å£å·²å¼€æ”¾
- [ ] Web ç•Œé¢å¯ä»¥è®¿é—®
- [ ] æˆªå›¾åŠŸèƒ½æ­£å¸¸
- [ ] OCR è¯†åˆ«æ­£å¸¸

---

## ğŸ¯ å®Œæˆï¼

éƒ¨ç½²å®Œæˆåï¼Œä½ çš„æˆªå›¾ç›‘æ§å·¥å…·å°±å¯ä»¥åœ¨ Linux VPS ä¸Šè¿è¡Œäº†ï¼

è®¿é—® `http://ä½ çš„VPS_IP:5001` å³å¯ä½¿ç”¨ Web ç•Œé¢æœç´¢å’ŒæŸ¥çœ‹æˆªå›¾ã€‚

